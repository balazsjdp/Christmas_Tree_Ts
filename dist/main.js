(()=>{"use strict";var t,i={DECORATION_COLORS:["#FFED8A","#FFE55C","#FFDE2E","#FFD700","#D1B000","#FF0000","#00FF00","#0000FF","#FF00FF","#00FFFF","#FFA500"],RANDOM_INT_BETWEEN:function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},CANVAS_WIDTH:800,CANVAS_HEIGHT:600,SNOW_DENSITY:500,BRANCH_DISTANCE:30,FPS:25},o=function(){function t(t){this.width=1,this._canvas=t,this.ctx=this._canvas.getContext("2d")}return t.prototype.setPoints=function(t,i){this.start=t,this.end=i},t.prototype.setColor=function(t){this.color=t},t.prototype.draw=function(){this.ctx.strokeStyle=this.color,this.ctx.lineWidth=this.width,this.ctx.beginPath(),this.ctx.moveTo(this.start.x,this.start.y),this.ctx.lineTo(this.end.x,this.end.y),this.ctx.stroke()},t}(),s=(t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},t(i,o)},function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}),n=function(t){function i(i){var o=t.call(this,i)||this;return o.width=10,o}return s(i,t),i}(o),r=function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},t(i,o)};return function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}(),e=function(t){function i(i,o,s){var n=t.call(this,i)||this;return n.origin=o,n.index=s,n}return r(i,t),i.prototype.calcPoints=function(t){var i={x:this.origin.start.x,y:this.index+this.origin.start.y},o=1==t?-1:1,s={x:i.x+this.r*o*Math.cos(this.theta)+this.index/5*o,y:i.y+this.r*Math.cos(this.theta)+this.index/5};this.setPoints(i,s)},i}(o),h=function(){function t(t){this.isLit=!0,this._canvas=t,this.ctx=this._canvas.getContext("2d")}return t.prototype.setPosition=function(t,i){this.position={x:t,y:i}},t.prototype.draw=function(){var t=this.color;this.isLit||(t=this.darkenColor(this.color,50)),this.ctx.fillStyle=t,this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.ellipse(this.position.x,this.position.y,this.radius,this.radius,Math.PI,0,5*Math.PI),this.ctx.stroke(),this.ctx.fill()},t.prototype.darkenColor=function(t,i){var o=parseInt(t.replace("#",""),16),s=Math.round(2.55*i),n=(o>>16)-s,r=(o>>8&255)-s,e=(255&o)-s;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(r<255?r<1?0:r:255)+(e<255?e<1?0:e:255)).toString(16).slice(1)},t.prototype.toggle=function(){this.isLit=!this.isLit},t.prototype.setColor=function(){this.color=i.DECORATION_COLORS[i.RANDOM_INT_BETWEEN(0,i.DECORATION_COLORS.length-1)]},t}(),c=function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},t(i,o)};return function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}(),a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c(i,t),i.prototype.calcPoints=function(t){var i=1==t?-1:1,o={x:this.origin.start.x+this.index*i+this.r*this.index*i,y:this.index+this.origin.start.y+this.r*this.index},s={x:o.x-this.r*i*Math.cos(this.theta)+this.index/5*-1,y:o.y-this.r*Math.cos(this.theta)+-1*this.r};this.setPoints(o,s),this.addDecor()},i.prototype.addDecor=function(){this.decoration=new h(this._canvas),this.decoration.setPosition(this.start.x,this.start.y+10),this.decoration.setColor(),this.decoration.radius=3,this.decoration.draw()},i.prototype.getDecoration=function(){return this.decoration},i.prototype.draw=function(){this.ctx.strokeStyle=this.color,this.ctx.lineWidth=this.width,this.ctx.beginPath(),this.ctx.moveTo(this.start.x,this.start.y),this.ctx.lineTo(this.end.x,this.end.y),this.ctx.stroke(),this.decoration.draw()},i}(e),u=function(){function t(t){this.branches=[],this._canvas=t,this.ctx=this._canvas.getContext("2d")}return t.prototype.init=function(){var t=this;this._canvas.getContext("2d").fillRect(0,0,i.CANVAS_WIDTH,i.CANVAS_HEIGHT);var o={x:i.CANVAS_WIDTH/2,y:30},s={x:i.CANVAS_WIDTH/2,y:i.CANVAS_HEIGHT};this.trunk=new n(this._canvas),this.trunk.setColor("#362500"),this.trunk.setPoints(o,s),this.star=new h(this._canvas),this.star.setPosition(o.x,o.y),this.star.setColor(),this.star.radius=10;for(var r=i.CANVAS_HEIGHT/40,c=i.BRANCH_DISTANCE,u=0;u<r;u++){var l=new e(this._canvas,this.trunk,u*c);l.width=5,l.theta=.5,l.r=40,l.setColor("#125207"),l.calcPoints(!1),this.branches.push(l);var p=new e(this._canvas,this.trunk,u*c);p.width=5,p.theta=.5,p.r=40,p.setColor("#125207"),p.calcPoints(!0),this.branches.push(p)}this.branches.forEach((function(i,o){for(var s=o/4,n=0;n<s;n++)(r=new a(t._canvas,i,n)).width=3,r.theta=90,r.r=17,r.setColor("#125207"),r.calcPoints(!0),t.branches.push(r);for(n=0;n<s;n++)(r=new a(t._canvas,i,n)).width=3,r.theta=-35,r.r=17,r.setColor("#125207"),r.calcPoints(!0),t.branches.push(r);for(n=0;n<s;n++)(r=new a(t._canvas,i,n)).width=3,r.theta=90,r.r=17,r.setColor("#125207"),r.calcPoints(!1),t.branches.push(r);for(n=0;n<s;n++){var r;(r=new a(t._canvas,i,n)).width=3,r.theta=-35,r.r=17,r.setColor("#125207"),r.calcPoints(!1),t.branches.push(r)}}))},t.prototype.draw=function(){this.trunk.draw(),this.branches.forEach((function(t){t.draw()})),this.star.draw()},t.prototype.getDecorations=function(){var t=[];return this.branches.forEach((function(i){i instanceof a&&t.push(i.getDecoration())})),t.push(this.star),t},t}(),l=function(){function t(t){this._canvas=t,this.ctx=this._canvas.getContext("2d")}return t.prototype.draw=function(){this.ctx.fillStyle=this.color,this.ctx.strokeStyle=this.color,this.ctx.beginPath(),this.ctx.rect(this.position.x,this.position.y,this.size,this.size),this.ctx.stroke(),this.ctx.fill()},t.prototype.setPosition=function(t,i){this.position={x:t,y:i}},t}(),p=function(){function t(t){this._canvas=t,this.ctx=this._canvas.getContext("2d"),this.color="#f2f1f0",this.velY=1,this.velX=1}return t.prototype.setPosition=function(t,i){this.position={x:t,y:i}},t.prototype.draw=function(){this.ctx.fillStyle=this.color,this.ctx.strokeStyle=this.color,this.ctx.beginPath(),this.ctx.ellipse(this.position.x,this.position.y,this.radius,this.radius,Math.PI,0,5*Math.PI),this.ctx.stroke(),this.ctx.fill()},t.prototype.advanceFalling=function(){this.position.y>=i.CANVAS_HEIGHT&&this.setPosition(this.position.x+this.velX,0+this.velY),this.position.x<=0?this.velX++:this.position.x>=i.CANVAS_WIDTH&&this.velX--,this.setPosition(this.position.x+this.velX,this.position.y+this.velY),this.changePosition()},t.prototype.changePosition=function(){this.velX=i.RANDOM_INT_BETWEEN(-2,2),this.velY=i.RANDOM_INT_BETWEEN(1,4)},t}(),f=document.createElement("canvas");f.setAttribute("id","canvas_"),f.setAttribute("width",i.CANVAS_WIDTH.toString()),f.setAttribute("height",i.CANVAS_HEIGHT.toString()),document.body.appendChild(f);var y=document.getElementById("canvas_"),d=y,_=new u(d);_.init();var x=d.getContext("2d"),v=_.getDecorations(),A=0,E=[],w=[],C=new l(d);C.setPosition(350,550),C.size=30,C.color="#FF0000",w.push(C);var N=new l(d);N.setPosition(400,540),N.size=40,N.color="#0000FF",w.push(N);var T=new l(d);function P(){x.fillStyle="black",x.fillRect(0,0,i.CANVAS_WIDTH,i.CANVAS_HEIGHT),_.draw(),w.forEach((function(t){t.draw()})),E.forEach((function(t){t.advanceFalling(),t.draw()})),++A%15==0&&v.forEach((function(t,i){i%2==0&&t.toggle()})),A%30==0&&v.forEach((function(t,i){i%2!=0&&t.toggle()}))}T.setPosition(450,560),T.size=20,T.color="#00FF00",w.push(T),setInterval((function(){requestAnimationFrame(P),P()}),1e3/i.FPS);for(var S=0;S<i.SNOW_DENSITY;S++){var g=new p(y);g.setPosition(i.RANDOM_INT_BETWEEN(0,i.CANVAS_WIDTH),i.RANDOM_INT_BETWEEN(0,i.CANVAS_HEIGHT)),g.radius=i.RANDOM_INT_BETWEEN(.2,2),E.push(g)}})();